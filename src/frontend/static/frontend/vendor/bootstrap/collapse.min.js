var Util=function(i){var t="transitionend";function e(e){var t=this,n=!1;return i(this).one(l.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||l.triggerTransitionEnd(t)},e),this}var l={TRANSITION_END:"bsTransitionEnd",getUID:function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return 0<i(document).find(t).length?t:null}catch(e){return null}},getTransitionDurationFromElement:function(e){if(!e)return 0;var t=i(e).css("transition-duration");return parseFloat(t)?(t=t.split(",")[0],1e3*parseFloat(t)):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){i(e).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i],a=t[i],s=a&&l.isElement(a)?"element":(o=a,{}.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(r).test(s))throw new Error(e.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+r+'".')}var o}};return i.fn.emulateTransitionEnd=e,i.event.special[l.TRANSITION_END]={bindType:t,delegateType:t,handle:function(e){if(i(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}},l}($);function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Collapse=function(l){var t="collapse",g="bs.collapse",e="."+g,n=l.fn[t],r={toggle:!0,parent:""},i={toggle:"boolean",parent:"(string|element)"},h={SHOW:"show"+e,SHOWN:"shown"+e,HIDE:"hide"+e,HIDDEN:"hidden"+e,CLICK_DATA_API:"click"+e+".data-api"},c="show",u="collapse",f="collapsing",d="collapsed",a="width",s="height",_=".show, .collapsing",p='[data-toggle="collapse"]',o=function(){function o(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=l.makeArray(l('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=l(p),i=0;i<n.length;i++){var r=n[i],a=Util.getSelectorFromElement(r);null!==a&&0<l(a).filter(e).length&&(this._selector=a,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var e=o.prototype;return e.toggle=function(){l(this._element).hasClass(c)?this.hide():this.show()},e.show=function(){var e,t,n=this;if(!this._isTransitioning&&!l(this._element).hasClass(c)&&(this._parent&&0===(e=l.makeArray(l(this._parent).find(_).filter('[data-parent="'+this._config.parent+'"]'))).length&&(e=null),!(e&&(t=l(e).not(this._selector).data(g))&&t._isTransitioning))){var i=l.Event(h.SHOW);if(l(this._element).trigger(i),!i.isDefaultPrevented()){e&&(o._jQueryInterface.call(l(e).not(this._selector),"hide"),t||l(e).data(g,null));var r=this._getDimension();l(this._element).removeClass(u).addClass(f),(this._element.style[r]=0)<this._triggerArray.length&&l(this._triggerArray).removeClass(d).attr("aria-expanded",!0),this.setTransitioning(!0);var a="scroll"+(r[0].toUpperCase()+r.slice(1)),s=Util.getTransitionDurationFromElement(this._element);l(this._element).one(Util.TRANSITION_END,function(){l(n._element).removeClass(f).addClass(u).addClass(c),n._element.style[r]="",n.setTransitioning(!1),l(n._element).trigger(h.SHOWN)}).emulateTransitionEnd(s),this._element.style[r]=this._element[a]+"px"}}},e.hide=function(){var e=this;if(!this._isTransitioning&&l(this._element).hasClass(c)){var t=l.Event(h.HIDE);if(l(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();if(this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",Util.reflow(this._element),l(this._element).addClass(f).removeClass(u).removeClass(c),0<this._triggerArray.length)for(var i=0;i<this._triggerArray.length;i++){var r=this._triggerArray[i],a=Util.getSelectorFromElement(r);if(null!==a)l(a).hasClass(c)||l(r).addClass(d).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var s=Util.getTransitionDurationFromElement(this._element);l(this._element).one(Util.TRANSITION_END,function(){e.setTransitioning(!1),l(e._element).removeClass(f).addClass(u).trigger(h.HIDDEN)}).emulateTransitionEnd(s)}}},e.setTransitioning=function(e){this._isTransitioning=e},e.dispose=function(){l.removeData(this._element,g),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},e._getConfig=function(e){return(e=_objectSpread({},r,e)).toggle=Boolean(e.toggle),Util.typeCheckConfig(t,e,i),e},e._getDimension=function(){return l(this._element).hasClass(a)?a:s},e._getParent=function(){var n=this,e=null;Util.isElement(this._config.parent)?(e=this._config.parent,void 0!==this._config.parent.jquery&&(e=this._config.parent[0])):e=l(this._config.parent)[0];var t='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return l(e).find(t).each(function(e,t){n._addAriaAndCollapsedClass(o._getTargetFromElement(t),[t])}),e},e._addAriaAndCollapsedClass=function(e,t){if(e){var n=l(e).hasClass(c);0<t.length&&l(t).toggleClass(d,!n).attr("aria-expanded",n)}},o._getTargetFromElement=function(e){var t=Util.getSelectorFromElement(e);return t?l(t)[0]:null},o._jQueryInterface=function(i){return this.each(function(){var e=l(this),t=e.data(g),n=_objectSpread({},r,e.data(),"object"==typeof i&&i?i:{});if(!t&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),t||(t=new o(this,n),e.data(g,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i]()}})},_createClass(o,null,[{key:"VERSION",get:function(){return"4.1.1"}},{key:"Default",get:function(){return r}}]),o}();return l(document).on(h.CLICK_DATA_API,p,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=l(this),t=Util.getSelectorFromElement(this);l(t).each(function(){var e=l(this),t=e.data(g)?"toggle":n.data();o._jQueryInterface.call(e,t)})}),l.fn[t]=o._jQueryInterface,l.fn[t].Constructor=o,l.fn[t].noConflict=function(){return l.fn[t]=n,o._jQueryInterface},o}($);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwuanMiLCJjb2xsYXBzZS5qcyJdLCJuYW1lcyI6WyJVdGlsIiwiJCIsIlRSQU5TSVRJT05fRU5EIiwidHJhbnNpdGlvbkVuZEVtdWxhdG9yIiwiZHVyYXRpb24iLCJfdGhpcyIsInRoaXMiLCJjYWxsZWQiLCJvbmUiLCJzZXRUaW1lb3V0IiwidHJpZ2dlclRyYW5zaXRpb25FbmQiLCJnZXRVSUQiLCJwcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldFNlbGVjdG9yRnJvbUVsZW1lbnQiLCJlbGVtZW50Iiwic2VsZWN0b3IiLCJnZXRBdHRyaWJ1dGUiLCJmaW5kIiwibGVuZ3RoIiwiZXJyIiwiZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJjc3MiLCJwYXJzZUZsb2F0Iiwic3BsaXQiLCJyZWZsb3ciLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VyIiwic3VwcG9ydHNUcmFuc2l0aW9uRW5kIiwiQm9vbGVhbiIsImlzRWxlbWVudCIsIm9iaiIsIm5vZGVUeXBlIiwidHlwZUNoZWNrQ29uZmlnIiwiY29tcG9uZW50TmFtZSIsImNvbmZpZyIsImNvbmZpZ1R5cGVzIiwicHJvcGVydHkiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJleHBlY3RlZFR5cGVzIiwidmFsdWUiLCJ2YWx1ZVR5cGUiLCJ0b1N0cmluZyIsIm1hdGNoIiwidG9Mb3dlckNhc2UiLCJSZWdFeHAiLCJ0ZXN0IiwiRXJyb3IiLCJ0b1VwcGVyQ2FzZSIsImZuIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJldmVudCIsInNwZWNpYWwiLCJiaW5kVHlwZSIsImRlbGVnYXRlVHlwZSIsImhhbmRsZSIsInRhcmdldCIsImlzIiwiaGFuZGxlT2JqIiwiaGFuZGxlciIsImFwcGx5IiwiYXJndW1lbnRzIiwiX29iamVjdFNwcmVhZCIsImkiLCJzb3VyY2UiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImNvbmNhdCIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJmb3JFYWNoIiwia2V5IiwiX2RlZmluZVByb3BlcnR5IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiX2NyZWF0ZUNsYXNzIiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJDb2xsYXBzZSIsIk5BTUUiLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsIkpRVUVSWV9OT19DT05GTElDVCIsIkRlZmF1bHQiLCJ0b2dnbGUiLCJwYXJlbnQiLCJEZWZhdWx0VHlwZSIsIkV2ZW50IiwiU0hPVyIsIlNIT1dOIiwiSElERSIsIkhJRERFTiIsIkNMSUNLX0RBVEFfQVBJIiwiQ2xhc3NOYW1lIiwiRGltZW5zaW9uIiwiU2VsZWN0b3IiLCJfaXNUcmFuc2l0aW9uaW5nIiwiX2VsZW1lbnQiLCJfY29uZmlnIiwiX2dldENvbmZpZyIsIl90cmlnZ2VyQXJyYXkiLCJtYWtlQXJyYXkiLCJpZCIsInRhYlRvZ2dsZXMiLCJlbGVtIiwiX3NlbGVjdG9yIiwicHVzaCIsIl9wYXJlbnQiLCJfZ2V0UGFyZW50IiwiX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyIsIl9wcm90byIsImhhc0NsYXNzIiwiaGlkZSIsInNob3ciLCJhY3RpdmVzIiwiYWN0aXZlc0RhdGEiLCJub3QiLCJkYXRhIiwic3RhcnRFdmVudCIsImlzRGVmYXVsdFByZXZlbnRlZCIsIl9qUXVlcnlJbnRlcmZhY2UiLCJkaW1lbnNpb24iLCJfZ2V0RGltZW5zaW9uIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0eWxlIiwiYXR0ciIsInNldFRyYW5zaXRpb25pbmciLCJzY3JvbGxTaXplIiwic2xpY2UiLCJfdGhpczIiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJpc1RyYW5zaXRpb25pbmciLCJkaXNwb3NlIiwicmVtb3ZlRGF0YSIsIl90aGlzMyIsImpxdWVyeSIsImVhY2giLCJfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQiLCJ0cmlnZ2VyQXJyYXkiLCJpc09wZW4iLCJ0b2dnbGVDbGFzcyIsIiR0aGlzIiwiVHlwZUVycm9yIiwiZ2V0Iiwib24iLCJjdXJyZW50VGFyZ2V0IiwidGFnTmFtZSIsInByZXZlbnREZWZhdWx0IiwiJHRyaWdnZXIiLCIkdGFyZ2V0Iiwibm9Db25mbGljdCJdLCJtYXBwaW5ncyI6IkFBTUEsSUFBQUEsS0FBQSxTQUFBQyxHQU1BLElBQUFDLEVBQUEsZ0JBc0JBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUMsS0FFQUMsR0FBQSxFQVNBLE9BUkFOLEVBQUFLLE1BQUFFLElBQUFSLEVBQUFFLGVBQUEsV0FDQUssR0FBQSxJQUVBRSxXQUFBLFdBQ0FGLEdBQ0FQLEVBQUFVLHFCQUFBTCxJQUVBRCxHQUNBRSxLQWNBLElBQUFOLEVBQUEsQ0FDQUUsZUFBQSxrQkFDQVMsT0FBQSxTQUFBQyxHQUNBLEtBRUFBLE1BcERBLElBb0RBQyxLQUFBQyxVQUNBQyxTQUFBQyxlQUFBSixLQUVBLE9BQUFBLEdBRUFLLHVCQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQUQsRUFBQUUsYUFBQSxlQUVBRCxHQUFBLE1BQUFBLElBQ0FBLEVBQUFELEVBQUFFLGFBQUEsU0FBQSxJQUdBLElBRUEsT0FBQSxFQURBbkIsRUFBQWMsVUFBQU0sS0FBQUYsR0FDQUcsT0FBQUgsRUFBQSxLQUNBLE1BQUFJLEdBQ0EsT0FBQSxPQUdBQyxpQ0FBQSxTQUFBTixHQUNBLElBQUFBLEVBQ0EsT0FBQSxFQUlBLElBQUFPLEVBQUF4QixFQUFBaUIsR0FBQVEsSUFBQSx1QkFHQSxPQUZBQyxXQUFBRixJQU9BQSxFQUFBQSxFQUFBRyxNQUFBLEtBQUEsR0FwRkEsSUFxRkFELFdBQUFGLElBTEEsR0FPQUksT0FBQSxTQUFBWCxHQUNBLE9BQUFBLEVBQUFZLGNB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QXNDLEdBQUFKLFlBQUFHLEVBRUE1RixFQUFBdUQsR0FBQXNDLEdBQUF3RSxXQUFBLFdBRUEsT0FEQXJLLEVBQUF1RCxHQUFBc0MsR0FBQUcsRUFDQUosRUFBQTBDLGtCQUdBMUMsRUE5VkEsQ0ErVkE1RiIsImZpbGUiOiJjb2xsYXBzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjEuMSk6IHV0aWwuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG52YXIgVXRpbCA9IGZ1bmN0aW9uICgkKSB7XG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogUHJpdmF0ZSBUcmFuc2l0aW9uRW5kIEhlbHBlcnNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICB2YXIgVFJBTlNJVElPTl9FTkQgPSAndHJhbnNpdGlvbmVuZCc7XG4gIHZhciBNQVhfVUlEID0gMTAwMDAwMDtcbiAgdmFyIE1JTExJU0VDT05EU19NVUxUSVBMSUVSID0gMTAwMDsgLy8gU2hvdXRvdXQgQW5ndXNDcm9sbCAoaHR0cHM6Ly9nb28uZ2wvcHh3UUdwKVxuXG4gIGZ1bmN0aW9uIHRvVHlwZShvYmopIHtcbiAgICByZXR1cm4ge30udG9TdHJpbmcuY2FsbChvYmopLm1hdGNoKC9cXHMoW2Etel0rKS9pKVsxXS50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYmluZFR5cGU6IFRSQU5TSVRJT05fRU5ELFxuICAgICAgZGVsZWdhdGVUeXBlOiBUUkFOU0lUSU9OX0VORCxcbiAgICAgIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKGV2ZW50KSB7XG4gICAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuaXModGhpcykpIHtcbiAgICAgICAgICByZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYW5zaXRpb25FbmRFbXVsYXRvcihkdXJhdGlvbikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgJCh0aGlzKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgZnVuY3Rpb24gKCkge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIFV0aWwudHJpZ2dlclRyYW5zaXRpb25FbmQoX3RoaXMpO1xuICAgICAgfVxuICAgIH0sIGR1cmF0aW9uKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFRyYW5zaXRpb25FbmRTdXBwb3J0KCkge1xuICAgICQuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQgPSB0cmFuc2l0aW9uRW5kRW11bGF0b3I7XG4gICAgJC5ldmVudC5zcGVjaWFsW1V0aWwuVFJBTlNJVElPTl9FTkRdID0gZ2V0U3BlY2lhbFRyYW5zaXRpb25FbmRFdmVudCgpO1xuICB9XG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBQdWJsaWMgVXRpbCBBcGlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cblxuICB2YXIgVXRpbCA9IHtcbiAgICBUUkFOU0lUSU9OX0VORDogJ2JzVHJhbnNpdGlvbkVuZCcsXG4gICAgZ2V0VUlEOiBmdW5jdGlvbiBnZXRVSUQocHJlZml4KSB7XG4gICAgICBkbyB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgIHByZWZpeCArPSB+fihNYXRoLnJhbmRvbSgpICogTUFYX1VJRCk7IC8vIFwifn5cIiBhY3RzIGxpa2UgYSBmYXN0ZXIgTWF0aC5mbG9vcigpIGhlcmVcbiAgICAgIH0gd2hpbGUgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZWZpeCkpO1xuXG4gICAgICByZXR1cm4gcHJlZml4O1xuICAgIH0sXG4gICAgZ2V0U2VsZWN0b3JGcm9tRWxlbWVudDogZnVuY3Rpb24gZ2V0U2VsZWN0b3JGcm9tRWxlbWVudChlbGVtZW50KSB7XG4gICAgICB2YXIgc2VsZWN0b3IgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnKTtcblxuICAgICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gJyMnKSB7XG4gICAgICAgIHNlbGVjdG9yID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSB8fCAnJztcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyICRzZWxlY3RvciA9ICQoZG9jdW1lbnQpLmZpbmQoc2VsZWN0b3IpO1xuICAgICAgICByZXR1cm4gJHNlbGVjdG9yLmxlbmd0aCA+IDAgPyBzZWxlY3RvciA6IG51bGw7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRUcmFuc2l0aW9uRHVyYXRpb25Gcm9tRWxlbWVudDogZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSAvLyBHZXQgdHJhbnNpdGlvbi1kdXJhdGlvbiBvZiB0aGUgZWxlbWVudFxuXG5cbiAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSAkKGVsZW1lbnQpLmNzcygndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xuICAgICAgdmFyIGZsb2F0VHJhbnNpdGlvbkR1cmF0aW9uID0gcGFyc2VGbG9hdCh0cmFuc2l0aW9uRHVyYXRpb24pOyAvLyBSZXR1cm4gMCBpZiBlbGVtZW50IG9yIHRyYW5zaXRpb24gZHVyYXRpb24gaXMgbm90IGZvdW5kXG5cbiAgICAgIGlmICghZmxvYXRUcmFuc2l0aW9uRHVyYXRpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9IC8vIElmIG11bHRpcGxlIGR1cmF0aW9ucyBhcmUgZGVmaW5lZCwgdGFrZSB0aGUgZmlyc3RcblxuXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb24uc3BsaXQoJywnKVswXTtcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KHRyYW5zaXRpb25EdXJhdGlvbikgKiBNSUxMSVNFQ09ORFNfTVVMVElQTElFUjtcbiAgICB9LFxuICAgIHJlZmxvdzogZnVuY3Rpb24gcmVmbG93KGVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9LFxuICAgIHRyaWdnZXJUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gICAgICAkKGVsZW1lbnQpLnRyaWdnZXIoVFJBTlNJVElPTl9FTkQpO1xuICAgIH0sXG4gICAgLy8gVE9ETzogUmVtb3ZlIGluIHY1XG4gICAgc3VwcG9ydHNUcmFuc2l0aW9uRW5kOiBmdW5jdGlvbiBzdXBwb3J0c1RyYW5zaXRpb25FbmQoKSB7XG4gICAgICByZXR1cm4gQm9vbGVhbihUUkFOU0lUSU9OX0VORCk7XG4gICAgfSxcbiAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uIGlzRWxlbWVudChvYmopIHtcbiAgICAgIHJldHVybiAob2JqWzBdIHx8IG9iaikubm9kZVR5cGU7XG4gICAgfSxcbiAgICB0eXBlQ2hlY2tDb25maWc6IGZ1bmN0aW9uIHR5cGVDaGVja0NvbmZpZyhjb21wb25lbnROYW1lLCBjb25maWcsIGNvbmZpZ1R5cGVzKSB7XG4gICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBjb25maWdUeXBlcykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZ1R5cGVzLCBwcm9wZXJ0eSkpIHtcbiAgICAgICAgICB2YXIgZXhwZWN0ZWRUeXBlcyA9IGNvbmZpZ1R5cGVzW3Byb3BlcnR5XTtcbiAgICAgICAgICB2YXIgdmFsdWUgPSBjb25maWdbcHJvcGVydHldO1xuICAgICAgICAgIHZhciB2YWx1ZVR5cGUgPSB2YWx1ZSAmJiBVdGlsLmlzRWxlbWVudCh2YWx1ZSkgPyAnZWxlbWVudCcgOiB0b1R5cGUodmFsdWUpO1xuXG4gICAgICAgICAgaWYgKCFuZXcgUmVnRXhwKGV4cGVjdGVkVHlwZXMpLnRlc3QodmFsdWVUeXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGNvbXBvbmVudE5hbWUudG9VcHBlckNhc2UoKSArIFwiOiBcIiArIChcIk9wdGlvbiBcXFwiXCIgKyBwcm9wZXJ0eSArIFwiXFxcIiBwcm92aWRlZCB0eXBlIFxcXCJcIiArIHZhbHVlVHlwZSArIFwiXFxcIiBcIikgKyAoXCJidXQgZXhwZWN0ZWQgdHlwZSBcXFwiXCIgKyBleHBlY3RlZFR5cGVzICsgXCJcXFwiLlwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBzZXRUcmFuc2l0aW9uRW5kU3VwcG9ydCgpO1xuICByZXR1cm4gVXRpbDtcbn0oJCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCIsImZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyB2YXIgb3duS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykgeyBvd25LZXlzID0gb3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwgc3ltKS5lbnVtZXJhYmxlOyB9KSk7IH0gb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBCb290c3RyYXAgKHY0LjEuMSk6IGNvbGxhcHNlLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9MSUNFTlNFKVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xudmFyIENvbGxhcHNlID0gZnVuY3Rpb24gKCQpIHtcbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBDb25zdGFudHNcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuICB2YXIgTkFNRSA9ICdjb2xsYXBzZSc7XG4gIHZhciBWRVJTSU9OID0gJzQuMS4xJztcbiAgdmFyIERBVEFfS0VZID0gJ2JzLmNvbGxhcHNlJztcbiAgdmFyIEVWRU5UX0tFWSA9IFwiLlwiICsgREFUQV9LRVk7XG4gIHZhciBEQVRBX0FQSV9LRVkgPSAnLmRhdGEtYXBpJztcbiAgdmFyIEpRVUVSWV9OT19DT05GTElDVCA9ICQuZm5bTkFNRV07XG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICBwYXJlbnQ6ICcnXG4gIH07XG4gIHZhciBEZWZhdWx0VHlwZSA9IHtcbiAgICB0b2dnbGU6ICdib29sZWFuJyxcbiAgICBwYXJlbnQ6ICcoc3RyaW5nfGVsZW1lbnQpJ1xuICB9O1xuICB2YXIgRXZlbnQgPSB7XG4gICAgU0hPVzogXCJzaG93XCIgKyBFVkVOVF9LRVksXG4gICAgU0hPV046IFwic2hvd25cIiArIEVWRU5UX0tFWSxcbiAgICBISURFOiBcImhpZGVcIiArIEVWRU5UX0tFWSxcbiAgICBISURERU46IFwiaGlkZGVuXCIgKyBFVkVOVF9LRVksXG4gICAgQ0xJQ0tfREFUQV9BUEk6IFwiY2xpY2tcIiArIEVWRU5UX0tFWSArIERBVEFfQVBJX0tFWVxuICB9O1xuICB2YXIgQ2xhc3NOYW1lID0ge1xuICAgIFNIT1c6ICdzaG93JyxcbiAgICBDT0xMQVBTRTogJ2NvbGxhcHNlJyxcbiAgICBDT0xMQVBTSU5HOiAnY29sbGFwc2luZycsXG4gICAgQ09MTEFQU0VEOiAnY29sbGFwc2VkJ1xuICB9O1xuICB2YXIgRGltZW5zaW9uID0ge1xuICAgIFdJRFRIOiAnd2lkdGgnLFxuICAgIEhFSUdIVDogJ2hlaWdodCdcbiAgfTtcbiAgdmFyIFNlbGVjdG9yID0ge1xuICAgIEFDVElWRVM6ICcuc2hvdywgLmNvbGxhcHNpbmcnLFxuICAgIERBVEFfVE9HR0xFOiAnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nXG4gICAgLyoqXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogQ2xhc3MgRGVmaW5pdGlvblxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gIH07XG5cbiAgdmFyIENvbGxhcHNlID1cbiAgLyojX19QVVJFX18qL1xuICBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sbGFwc2UoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGNvbmZpZyk7XG4gICAgICB0aGlzLl90cmlnZ2VyQXJyYXkgPSAkLm1ha2VBcnJheSgkKFwiW2RhdGEtdG9nZ2xlPVxcXCJjb2xsYXBzZVxcXCJdW2hyZWY9XFxcIiNcIiArIGVsZW1lbnQuaWQgKyBcIlxcXCJdLFwiICsgKFwiW2RhdGEtdG9nZ2xlPVxcXCJjb2xsYXBzZVxcXCJdW2RhdGEtdGFyZ2V0PVxcXCIjXCIgKyBlbGVtZW50LmlkICsgXCJcXFwiXVwiKSkpO1xuICAgICAgdmFyIHRhYlRvZ2dsZXMgPSAkKFNlbGVjdG9yLkRBVEFfVE9HR0xFKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJUb2dnbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBlbGVtID0gdGFiVG9nZ2xlc1tpXTtcbiAgICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW0pO1xuXG4gICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCAmJiAkKHNlbGVjdG9yKS5maWx0ZXIoZWxlbWVudCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG5cbiAgICAgICAgICB0aGlzLl90cmlnZ2VyQXJyYXkucHVzaChlbGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9wYXJlbnQgPSB0aGlzLl9jb25maWcucGFyZW50ID8gdGhpcy5fZ2V0UGFyZW50KCkgOiBudWxsO1xuXG4gICAgICBpZiAoIXRoaXMuX2NvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsIHRoaXMuX3RyaWdnZXJBcnJheSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9jb25maWcudG9nZ2xlKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICB9XG4gICAgfSAvLyBHZXR0ZXJzXG5cblxuICAgIHZhciBfcHJvdG8gPSBDb2xsYXBzZS5wcm90b3R5cGU7XG5cbiAgICAvLyBQdWJsaWNcbiAgICBfcHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgaWYgKCQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5zaG93ID0gZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgJCh0aGlzLl9lbGVtZW50KS5oYXNDbGFzcyhDbGFzc05hbWUuU0hPVykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgYWN0aXZlcztcbiAgICAgIHZhciBhY3RpdmVzRGF0YTtcblxuICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xuICAgICAgICBhY3RpdmVzID0gJC5tYWtlQXJyYXkoJCh0aGlzLl9wYXJlbnQpLmZpbmQoU2VsZWN0b3IuQUNUSVZFUykuZmlsdGVyKFwiW2RhdGEtcGFyZW50PVxcXCJcIiArIHRoaXMuX2NvbmZpZy5wYXJlbnQgKyBcIlxcXCJdXCIpKTtcblxuICAgICAgICBpZiAoYWN0aXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBhY3RpdmVzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYWN0aXZlcykge1xuICAgICAgICBhY3RpdmVzRGF0YSA9ICQoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKS5kYXRhKERBVEFfS0VZKTtcblxuICAgICAgICBpZiAoYWN0aXZlc0RhdGEgJiYgYWN0aXZlc0RhdGEuX2lzVHJhbnNpdGlvbmluZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgc3RhcnRFdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPVyk7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc3RhcnRFdmVudCk7XG5cbiAgICAgIGlmIChzdGFydEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGFjdGl2ZXMpIHtcbiAgICAgICAgQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZS5jYWxsKCQoYWN0aXZlcykubm90KHRoaXMuX3NlbGVjdG9yKSwgJ2hpZGUnKTtcblxuICAgICAgICBpZiAoIWFjdGl2ZXNEYXRhKSB7XG4gICAgICAgICAgJChhY3RpdmVzKS5kYXRhKERBVEFfS0VZLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORyk7XG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAwO1xuXG4gICAgICBpZiAodGhpcy5fdHJpZ2dlckFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgJCh0aGlzLl90cmlnZ2VyQXJyYXkpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5DT0xMQVBTRUQpLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgJChfdGhpcy5fZWxlbWVudCkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNJTkcpLmFkZENsYXNzKENsYXNzTmFtZS5DT0xMQVBTRSkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuICAgICAgICBfdGhpcy5fZWxlbWVudC5zdHlsZVtkaW1lbnNpb25dID0gJyc7XG5cbiAgICAgICAgX3RoaXMuc2V0VHJhbnNpdGlvbmluZyhmYWxzZSk7XG5cbiAgICAgICAgJChfdGhpcy5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5TSE9XTik7XG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FwaXRhbGl6ZWREaW1lbnNpb24gPSBkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSgxKTtcbiAgICAgIHZhciBzY3JvbGxTaXplID0gXCJzY3JvbGxcIiArIGNhcGl0YWxpemVkRGltZW5zaW9uO1xuICAgICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IFV0aWwuZ2V0VHJhbnNpdGlvbkR1cmF0aW9uRnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCk7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjb21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQodHJhbnNpdGlvbkR1cmF0aW9uKTtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnRbc2Nyb2xsU2l6ZV0gKyBcInB4XCI7XG4gICAgfTtcblxuICAgIF9wcm90by5oaWRlID0gZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8ICEkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5TSE9XKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGFydEV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFKTtcbiAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihzdGFydEV2ZW50KTtcblxuICAgICAgaWYgKHN0YXJ0RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGVbZGltZW5zaW9uXSA9IHRoaXMuX2VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbZGltZW5zaW9uXSArIFwicHhcIjtcbiAgICAgIFV0aWwucmVmbG93KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5hZGRDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgIGlmICh0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciB0cmlnZ2VyID0gdGhpcy5fdHJpZ2dlckFycmF5W2ldO1xuICAgICAgICAgIHZhciBzZWxlY3RvciA9IFV0aWwuZ2V0U2VsZWN0b3JGcm9tRWxlbWVudCh0cmlnZ2VyKTtcblxuICAgICAgICAgIGlmIChzZWxlY3RvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyICRlbGVtID0gJChzZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIGlmICghJGVsZW0uaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpKSB7XG4gICAgICAgICAgICAgICQodHJpZ2dlcikuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFRCkuYXR0cignYXJpYS1leHBhbmRlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKHRydWUpO1xuXG4gICAgICB2YXIgY29tcGxldGUgPSBmdW5jdGlvbiBjb21wbGV0ZSgpIHtcbiAgICAgICAgX3RoaXMyLnNldFRyYW5zaXRpb25pbmcoZmFsc2UpO1xuXG4gICAgICAgICQoX3RoaXMyLl9lbGVtZW50KS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0lORykuYWRkQ2xhc3MoQ2xhc3NOYW1lLkNPTExBUFNFKS50cmlnZ2VyKEV2ZW50LkhJRERFTik7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnN0eWxlW2RpbWVuc2lvbl0gPSAnJztcbiAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBVdGlsLmdldFRyYW5zaXRpb25EdXJhdGlvbkZyb21FbGVtZW50KHRoaXMuX2VsZW1lbnQpO1xuICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY29tcGxldGUpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKHRyYW5zaXRpb25EdXJhdGlvbik7XG4gICAgfTtcblxuICAgIF9wcm90by5zZXRUcmFuc2l0aW9uaW5nID0gZnVuY3Rpb24gc2V0VHJhbnNpdGlvbmluZyhpc1RyYW5zaXRpb25pbmcpIHtcbiAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IGlzVHJhbnNpdGlvbmluZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLmRpc3Bvc2UgPSBmdW5jdGlvbiBkaXNwb3NlKCkge1xuICAgICAgJC5yZW1vdmVEYXRhKHRoaXMuX2VsZW1lbnQsIERBVEFfS0VZKTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLl90cmlnZ2VyQXJyYXkgPSBudWxsO1xuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gbnVsbDtcbiAgICB9OyAvLyBQcml2YXRlXG5cblxuICAgIF9wcm90by5fZ2V0Q29uZmlnID0gZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgIGNvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIERlZmF1bHQsIGNvbmZpZyk7XG4gICAgICBjb25maWcudG9nZ2xlID0gQm9vbGVhbihjb25maWcudG9nZ2xlKTsgLy8gQ29lcmNlIHN0cmluZyB2YWx1ZXNcblxuICAgICAgVXRpbC50eXBlQ2hlY2tDb25maWcoTkFNRSwgY29uZmlnLCBEZWZhdWx0VHlwZSk7XG4gICAgICByZXR1cm4gY29uZmlnO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldERpbWVuc2lvbiA9IGZ1bmN0aW9uIF9nZXREaW1lbnNpb24oKSB7XG4gICAgICB2YXIgaGFzV2lkdGggPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKERpbWVuc2lvbi5XSURUSCk7XG4gICAgICByZXR1cm4gaGFzV2lkdGggPyBEaW1lbnNpb24uV0lEVEggOiBEaW1lbnNpb24uSEVJR0hUO1xuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldFBhcmVudCA9IGZ1bmN0aW9uIF9nZXRQYXJlbnQoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHBhcmVudCA9IG51bGw7XG5cbiAgICAgIGlmIChVdGlsLmlzRWxlbWVudCh0aGlzLl9jb25maWcucGFyZW50KSkge1xuICAgICAgICBwYXJlbnQgPSB0aGlzLl9jb25maWcucGFyZW50OyAvLyBJdCdzIGEgalF1ZXJ5IG9iamVjdFxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fY29uZmlnLnBhcmVudC5qcXVlcnkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgcGFyZW50ID0gdGhpcy5fY29uZmlnLnBhcmVudFswXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyZW50ID0gJCh0aGlzLl9jb25maWcucGFyZW50KVswXTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlbGVjdG9yID0gXCJbZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIl1bZGF0YS1wYXJlbnQ9XFxcIlwiICsgdGhpcy5fY29uZmlnLnBhcmVudCArIFwiXFxcIl1cIjtcbiAgICAgICQocGFyZW50KS5maW5kKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG4gICAgICAgIF90aGlzMy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKENvbGxhcHNlLl9nZXRUYXJnZXRGcm9tRWxlbWVudChlbGVtZW50KSwgW2VsZW1lbnRdKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3MgPSBmdW5jdGlvbiBfYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKGVsZW1lbnQsIHRyaWdnZXJBcnJheSkge1xuICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGlzT3BlbiA9ICQoZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuXG4gICAgICAgIGlmICh0cmlnZ2VyQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICQodHJpZ2dlckFycmF5KS50b2dnbGVDbGFzcyhDbGFzc05hbWUuQ09MTEFQU0VELCAhaXNPcGVuKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgaXNPcGVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07IC8vIFN0YXRpY1xuXG5cbiAgICBDb2xsYXBzZS5fZ2V0VGFyZ2V0RnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBfZ2V0VGFyZ2V0RnJvbUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgdmFyIHNlbGVjdG9yID0gVXRpbC5nZXRTZWxlY3RvckZyb21FbGVtZW50KGVsZW1lbnQpO1xuICAgICAgcmV0dXJuIHNlbGVjdG9yID8gJChzZWxlY3RvcilbMF0gOiBudWxsO1xuICAgIH07XG5cbiAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkpO1xuXG4gICAgICAgIHZhciBfY29uZmlnID0gX29iamVjdFNwcmVhZCh7fSwgRGVmYXVsdCwgJHRoaXMuZGF0YSgpLCB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWcgPyBjb25maWcgOiB7fSk7XG5cbiAgICAgICAgaWYgKCFkYXRhICYmIF9jb25maWcudG9nZ2xlICYmIC9zaG93fGhpZGUvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICAgIF9jb25maWcudG9nZ2xlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBkYXRhID0gbmV3IENvbGxhcHNlKHRoaXMsIF9jb25maWcpO1xuICAgICAgICAgICR0aGlzLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9jcmVhdGVDbGFzcyhDb2xsYXBzZSwgbnVsbCwgW3tcbiAgICAgIGtleTogXCJWRVJTSU9OXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIFZFUlNJT047XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIkRlZmF1bHRcIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gRGVmYXVsdDtcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ29sbGFwc2U7XG4gIH0oKTtcbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBEYXRhIEFwaSBpbXBsZW1lbnRhdGlvblxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG5cblxuICAkKGRvY3VtZW50KS5vbihFdmVudC5DTElDS19EQVRBX0FQSSwgU2VsZWN0b3IuREFUQV9UT0dHTEUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIHByZXZlbnREZWZhdWx0IG9ubHkgZm9yIDxhPiBlbGVtZW50cyAod2hpY2ggY2hhbmdlIHRoZSBVUkwpIG5vdCBpbnNpZGUgdGhlIGNvbGxhcHNpYmxlIGVsZW1lbnRcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC50YWdOYW1lID09PSAnQScpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgdmFyICR0cmlnZ2VyID0gJCh0aGlzKTtcbiAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG4gICAgJChzZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRhcmdldCA9ICQodGhpcyk7XG4gICAgICB2YXIgZGF0YSA9ICR0YXJnZXQuZGF0YShEQVRBX0tFWSk7XG4gICAgICB2YXIgY29uZmlnID0gZGF0YSA/ICd0b2dnbGUnIDogJHRyaWdnZXIuZGF0YSgpO1xuXG4gICAgICBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJHRhcmdldCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG4gIC8qKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogalF1ZXJ5XG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuICAkLmZuW05BTUVdID0gQ29sbGFwc2UuX2pRdWVyeUludGVyZmFjZTtcbiAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IENvbGxhcHNlO1xuXG4gICQuZm5bTkFNRV0ubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgIHJldHVybiBDb2xsYXBzZS5falF1ZXJ5SW50ZXJmYWNlO1xuICB9O1xuXG4gIHJldHVybiBDb2xsYXBzZTtcbn0oJCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsYXBzZS5qcy5tYXAiXX0=
